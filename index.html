<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FoodHub - Online Food Ordering</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      /* Previous styles remain the same */
      html {
        scroll-behavior: smooth;
        scroll-padding-top: 70px; /* Accounts for fixed navbar */
      }

      .navbar {
        position: sticky;
        top: 0;
        z-index: 1020;
      }

      section {
        padding-top: 10px;
        margin-top: -10px;
      }

      .hero-section {
        background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
          url("assets/hero2.jpg");
        background-size: cover;
        color: white;
        padding: 100px 0;
      }

      .category-card {
        transition: transform 0.3s;
        cursor: pointer;
      }

      .category-card:hover {
        transform: translateY(-5px);
      }

      .cart-badge {
        position: absolute;
        top: -5px;
        right: -5px;
      }

      .menu-item {
        border: 1px solid #dee2e6;
        border-radius: 8px;
        transition: box-shadow 0.3s;
      }

      .menu-item:hover {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      #cart-sidebar {
        position: fixed;
        right: -400px;
        top: 0;
        width: 400px;
        height: 100vh;
        background: white;
        transition: right 0.3s;
        z-index: 1050;
      }

      #cart-sidebar.active {
        right: 0;
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="#hero">FoodHub</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <!-- Code Snippet index.html:(90-124) -->
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link" href="#hero">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#categories">Categories</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#menu">Menu</a>
            </li>
          </ul>
          <div class="d-flex">
            <button
              id="loginBtn"
              class="btn btn-outline-light me-2"
              data-bs-toggle="modal"
              data-bs-target="#loginModal"
            >
              Login
            </button>
            <button
              id="registerBtn"
              class="btn btn-light me-2"
              data-bs-toggle="modal"
              data-bs-target="#registerModal"
            >
              Register
            </button>
            <div id="loggedInUser"></div>
            <!-- Logout button -->
            <button id="logoutBtn" style="display: none">Logout</button>
            <button class="btn btn-primary position-relative" id="cartBtn">
              <i class="bi bi-cart"></i> Cart
              <span class="badge bg-danger cart-badge" id="cartCount">0</span>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section id="hero" class="hero-section text-center">
      <div class="container">
        <h1 class="display-4 mb-4">Delicious Food Delivered</h1>
        <p class="lead mb-4">
          Order from your favorite restaurants with just a few clicks
        </p>
        <button class="btn btn-primary btn-lg">Order Now</button>
      </div>
    </section>

    <!-- Categories Section -->
    <section id="categories" class="py-5">
      <div class="container">
        <h2 class="text-center mb-4">Food Categories</h2>
        <div class="row row-cols-1 row-cols-md-3 g-4" id="categoriesContainer">
          <!-- Example category structure -->
          <!-- <div class="col">
                    <div class="category-card card text-center h-100">
                        <img src="/api/placeholder/400/300" class="card-img-top" alt="Category">
                        <div class="card-body">
                            <h5 class="card-title">Category Name</h5>
                        </div>
                    </div>
                </div> -->
        </div>
      </div>
    </section>

    <!-- Menu Section -->
    <section id="menu" class="py-5 bg-light">
      <div class="container">
        <h2 class="text-center mb-4">Our Menu</h2>
        <div class="row g-4" id="menuItems">
          <!-- Menu items will be loaded here -->
        </div>
      </div>
    </section>

    <!-- Cart Sidebar -->
    <div id="cart-sidebar" class="shadow-lg p-3">
      <h4 class="d-flex justify-content-between align-items-center mb-4">
        Your Cart
        <button class="btn-close" id="closeCart"></button>
      </h4>
      <div id="cartItems">
        <!-- Cart items will be loaded here -->
      </div>
      <div class="mt-auto">
        <div class="d-flex justify-content-between mb-3">
          <h5>Total:</h5>
          <h5 id="cartTotal">$0.00</h5>
        </div>
        <button class="btn btn-primary w-100" id="checkoutBtn">
          Proceed to Checkout
        </button>
      </div>
    </div>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Login</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="loginForm">
              <div class="mb-3">
                <label class="form-label">Email</label>
                <input
                  type="email"
                  class="form-control"
                  name="email"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control"
                  name="password"
                  required
                />
              </div>
              <button type="submit" class="btn btn-primary w-100">Login</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Register Modal -->
    <div class="modal fade" id="registerModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Register</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="registerForm">
              <div class="mb-3">
                <label class="form-label">Name</label>
                <input type="text" class="form-control" name="name" required />
              </div>
              <div class="mb-3">
                <label class="form-label">Email</label>
                <input
                  type="email"
                  class="form-control"
                  name="email"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control"
                  name="password"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Confirm Password</label>
                <input
                  type="password"
                  class="form-control"
                  name="confirmPassword"
                  required
                />
              </div>
              <button type="submit" class="btn btn-primary w-100">
                Register
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="checkoutModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Delivery Information</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="checkoutForm">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Full Name</label>
                  <input
                    type="text"
                    class="form-control"
                    name="fullName"
                    required
                  />
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Phone Number</label>
                  <input
                    type="tel"
                    class="form-control"
                    name="phone"
                    required
                  />
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Email Address</label>
                <input
                  type="email"
                  class="form-control"
                  name="email"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Delivery Address</label>
                <textarea
                  class="form-control"
                  name="address"
                  rows="3"
                  required
                ></textarea>
              </div>
              <div class="mb-4">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="newsletterSubscribe"
                    name="newsletter"
                  />
                  <label class="form-check-label" for="newsletterSubscribe">
                    Subscribe to our newsletter for exclusive offers and updates
                  </label>
                </div>
              </div>
              <div class="border-top pt-3">
                <h6 class="mb-3">Order Summary</h6>
                <div id="checkoutItems" class="mb-3">
                  <!-- Order items will be listed here -->
                </div>
                <div class="d-flex justify-content-between mb-3">
                  <strong>Total Amount:</strong>
                  <strong id="checkoutTotal">$0.00</strong>
                </div>
              </div>
              <button type="submit" class="btn btn-primary w-100">
                Place Order
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="orderSuccessModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body text-center p-4">
            <div class="mb-4">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="64"
                height="64"
                fill="currentColor"
                class="bi bi-check-circle-fill text-success"
                viewBox="0 0 16 16"
              >
                <path
                  d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"
                />
              </svg>
            </div>
            <h4 class="mb-3">Order Placed Successfully!</h4>
            <p class="text-muted mb-4">
              Thank you for your order. We'll send you an email confirmation
              shortly.
            </p>
            <button class="btn btn-primary" onclick="handleOrderComplete()">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
      // State management
      let cart = [];
      //   Sample Category Data
      const categories = [
        {
          id: 1,
          name: "Main Courses",
          description: "Hearty meals for lunch and dinner",
          imageUrl: "assets/categories/hearty-dishes.jpg",
        },
        {
          id: 2,
          name: "Appetizers",
          description: "Light starters and snacks",
          imageUrl: "assets/categories/appetizer.jpg",
        },
        {
          id: 3,
          name: "Pizza & Pasta",
          description: "Italian favorites",
          imageUrl: "assets/categories/pizza.jpg",
        },
        {
          id: 4,
          name: "Desserts",
          description: "Sweet treats and confections",
          imageUrl: "assets/categories/desserts.jpg",
        },
        {
          id: 5,
          name: "Beverages",
          description: "Refreshing drinks and cocktails",
          imageUrl: "assets/categories/beverages.jpg",
        },
        {
          id: 6,
          name: "Healthy Options",
          description: "Nutritious and light meals",
          imageUrl: "assets/categories/healthy-dishes.jpg",
        },
      ];
      // Sample menu items data
      const menuItems = [
        {
          id: 101,
          categoryId: 1,
          name: "Grilled Salmon",
          description:
            "Fresh Atlantic salmon with herbs, served with roasted vegetables",
          price: 24.99,
          imageUrl: "assets/food-items/grilled-salmon.jpg",
          isVegetarian: false,
          isSpicy: false,
        },
        {
          id: 102,
          categoryId: 1,
          name: "Beef Tenderloin",
          description:
            "Prime cut tenderloin with red wine sauce and mashed potatoes",
          price: 29.99,
          imageUrl: "assets/food-items/beef-tenderloin.jpg",
          isVegetarian: false,
          isSpicy: false,
        },
        {
          id: 201,
          categoryId: 2,
          name: "Crispy Calamari",
          description: "Lightly breaded calamari served with marinara sauce",
          price: 12.99,
          imageUrl: "assets/food-items/Crispy-Calamari.jpg",
          isVegetarian: false,
          isSpicy: false,
        },
        {
          id: 202,
          categoryId: 2,
          name: "Bruschetta",
          description:
            "Toasted bread topped with tomatoes, garlic, and fresh basil",
          price: 9.99,
          imageUrl: "assets/food-items/Bruschetta.jpg",
          isVegetarian: true,
          isSpicy: false,
        },
        {
          id: 301,
          categoryId: 3,
          name: "Margherita Pizza",
          description:
            "Classic pizza with tomato sauce, fresh mozzarella, and basil",
          price: 16.99,
          imageUrl: "assets/food-items/Margherita-Pizza.jpg",
          isVegetarian: true,
          isSpicy: false,
        },
        {
          id: 302,
          categoryId: 3,
          name: "Fettuccine Alfredo",
          description: "Creamy pasta with parmesan cheese sauce",
          price: 17.99,
          imageUrl: "assets/food-items/Fettuccine-Alfredo.jpg",
          isVegetarian: true,
          isSpicy: false,
        },
        {
          id: 401,
          categoryId: 4,
          name: "Tiramisu",
          description: "Classic Italian dessert with coffee-soaked ladyfingers",
          price: 8.99,
          imageUrl: "assets/food-items/Tiramisu.jpg",
          isVegetarian: true,
          isSpicy: false,
        },
        {
          id: 402,
          categoryId: 4,
          name: "Chocolate Lava Cake",
          description:
            "Warm chocolate cake with molten center, served with vanilla ice cream",
          price: 9.99,
          imageUrl: "assets/food-items/Chocolate-Lava-Cake.jpg",
          isVegetarian: true,
          isSpicy: false,
        },
        {
          id: 501,
          categoryId: 5,
          name: "Fresh Fruit Smoothie",
          description: "Blend of seasonal fruits with yogurt",
          price: 6.99,
          imageUrl: "assets/food-items/Fresh-Fruit-Smoothie.jpg",
          isVegetarian: true,
          isSpicy: false,
        },
        {
          id: 502,
          categoryId: 5,
          name: "Italian Soda",
          description: "Sparkling water with your choice of flavored syrup",
          price: 4.99,
          imageUrl: "assets/food-items/Italian-Soda.jpg",
          isVegetarian: true,
          isSpicy: false,
        },
        {
          id: 601,
          categoryId: 6,
          name: "Quinoa Buddha Bowl",
          description: "Mixed vegetables, quinoa, avocado with tahini dressing",
          price: 15.99,
          imageUrl: "assets/food-items/Quinoa-Buddha-Bowl.jpg",
          isVegetarian: true,
          isSpicy: false,
        },
        {
          id: 602,
          categoryId: 6,
          name: "Mediterranean Salad",
          description:
            "Mixed greens, feta cheese, olives, and balsamic dressing",
          price: 13.99,
          imageUrl: "assets/food-items/Mediterranean-Salad.jpg",
          isVegetarian: true,
          isSpicy: false,
        },
      ];
      // DOM Elements
      const cartSidebar = document.getElementById("cart-sidebar");
      const cartBtn = document.getElementById("cartBtn");
      const closeCart = document.getElementById("closeCart");
      const cartCount = document.getElementById("cartCount");
      const cartItemsContainer = document.getElementById("cartItems");
      const cartTotal = document.getElementById("cartTotal");
      const checkoutBtn = document.getElementById("checkoutBtn");
      // Get the login, register, and logout elements
      const loginForm = document.getElementById("loginForm");
      const registerForm = document.getElementById("registerForm");
      const logoutBtn = document.getElementById("logoutBtn");

      // Event Listeners
      cartBtn.addEventListener("click", toggleCart);
      closeCart.addEventListener("click", toggleCart);
      checkoutBtn.addEventListener("click", handleCheckout);
      // Event Listeners Authentication
      loginForm.addEventListener("submit", handleLogin);
      registerForm.addEventListener("submit", handleRegister);
      // Add event listener to logout button
      logoutBtn.addEventListener("click", handleLogout);

      // Cart Functions
      function toggleCart() {
        cartSidebar.classList.toggle("active");
      }

      function updateCart() {
        cartCount.textContent = cart.length;
        cartItemsContainer.innerHTML = cart
          .map(
            (item) => `
                      <div class="d-flex justify-content-between align-items-center mb-3">
                          <div>
                              <h6 class="mb-0">${item.name}</h6>
                              <small class="text-muted">$${item.price}</small>
                          </div>
                          <button class="btn btn-sm btn-danger" onclick="removeFromCart(${item.id})">Remove</button>
                      </div>
                  `
          )
          .join("");
        cartTotal.textContent =
          "$" + cart.reduce((sum, item) => sum + item.price, 0).toFixed(2);
      }

      function addToCart(item) {
        cart.push(item);
        updateCart();
      }

      function removeFromCart(itemId) {
        cart = cart.filter((item) => item.id !== itemId);
        updateCart();
      }

      // AJAX Functions
      async function fetchCategories() {
        try {
          // Simulate API delay
          await new Promise((resolve) => setTimeout(resolve, 300));
          renderCategories();
        } catch (error) {
          console.error("Error fetching categories:", error);
        }
      }

      async function fetchMenuItems(categoryId = null) {
        try {
          // Simulate API delay
          await new Promise((resolve) => setTimeout(resolve, 300));
          const filteredItems = categoryId
            ? menuItems.filter((item) => item.categoryId === categoryId)
            : menuItems;
          renderMenuItems(filteredItems);
        } catch (error) {
          console.error("Error fetching menu items:", error);
        }
      }

      // Render Functions
      function renderCategories() {
        const categoriesContainer = document.getElementById(
          "categoriesContainer"
        );
        categoriesContainer.innerHTML = categories
          .map(
            (category) => `
        <div class="col">
            <div class="category-card card text-center h-100" onclick="fetchMenuItems(${category.id})">
                <img src="${category.imageUrl}" class="card-img-top" alt="${category.name}">
                <div class="card-body">
                    <h5 class="card-title">${category.name}</h5>
                    <p class="card-text">${category.description}</p>
                </div>
            </div>
        </div>
    `
          )
          .join("");
      }

      function renderMenuItems() {
        const menuContainer = document.getElementById("menuItems");
        menuContainer.innerHTML = menuItems
          .map(
            (item) => `
                      <div class="col-md-6 col-lg-4">
                          <div class="menu-item p-3">
                              <img src="${item.imageUrl}" class="img-fluid rounded mb-3" alt="${item.name}">
                              <h5>${item.name}</h5>
                              <p class="text-muted">${item.description}</p>
                              <div class="d-flex justify-content-between align-items-center">
                                  <h6 class="mb-0">$${item.price}</h6>
                                  <button class="btn btn-primary" onclick="addToCart({
                                      id: ${item.id},
                                      name: '${item.name}',
                                      price: ${item.price}
                                  })">Add to Cart</button>
                              </div>
                          </div>
                      </div>
                  `
          )
          .join("");
      }

      // Function to handle login
      async function handleLogin(e) {
        e.preventDefault();
        const formData = new FormData(loginForm);
        try {
          const email = formData.get("email");
          const password = formData.get("password");
          if (!email || !password) {
            alert("Please fill in all fields");
            return;
          }
          if (!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(email)) {
            alert("Invalid email address");
            return;
          }
          if (password.length < 8) {
            alert("Password must be at least 8 characters long");
            return;
          }
          await new Promise((resolve) => setTimeout(resolve, 300));
          const storedUsers = JSON.parse(localStorage.getItem("users")) || [];
          const user = storedUsers.find(
            (user) => user.email === email && user.password === password
          );
          if (user) {
            localStorage.setItem("userData", JSON.stringify(user));
            location.reload();
          } else {
            alert("Invalid email or password");
          }
        } catch (error) {
          console.error("Login error:", error);
        }
      }

      // Function to handle register
      async function handleRegister(e) {
        e.preventDefault();
        const formData = new FormData(registerForm);
        try {
          const name = formData.get("name");
          const email = formData.get("email");
          const password = formData.get("password");
          const confirmPassword = formData.get("confirmPassword");
          if (!name || !email || !password || !confirmPassword) {
            alert("Please fill in all fields");
            return;
          }
          if (!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(email)) {
            alert("Invalid email address");
            return;
          }
          if (password.length < 8) {
            alert("Password must be at least 8 characters long");
            return;
          }
          if (password !== confirmPassword) {
            alert("Passwords do not match");
            return;
          }
          await new Promise((resolve) => setTimeout(resolve, 300));
          const storedUsers = JSON.parse(localStorage.getItem("users")) || [];
          const existingUser = storedUsers.find((user) => user.email === email);
          if (existingUser) {
            alert("Email already exists");
            return;
          }
          const user = {
            name,
            email,
            password,
          };
          storedUsers.push(user);
          localStorage.setItem("users", JSON.stringify(storedUsers));
          localStorage.setItem("userData", JSON.stringify(user));
          location.reload();
        } catch (error) {
          console.error("Registration error:", error);
        }
      }

      // Function to handle logout
      function handleLogout() {
        localStorage.removeItem("userData");
        location.reload();
      }

      // Check if user is logged in on page load
      if (localStorage.getItem("userData")) {
        const userData = JSON.parse(localStorage.getItem("userData"));
        // Display logged in user's name or email
        const loggedInUser = document.getElementById("loggedInUser");
        loggedInUser.textContent = `Welcome, ${userData.name}!`;
        // Hide login and register buttons
        const loginBtn = document.getElementById("loginBtn");
        const registerBtn = document.getElementById("registerBtn");
        loginBtn.style.display = "none";
        registerBtn.style.display = "none";
        // Show logout button
        logoutBtn.style.display = "block";
      } else {
        // Hide logout button
        logoutBtn.style.display = "none";
      }

      async function handleCheckout() {
        const checkoutModal = new bootstrap.Modal(
          document.getElementById("checkoutModal")
        );
        const checkoutItems = document.getElementById("checkoutItems");
        const checkoutTotal = document.getElementById("checkoutTotal");

        // Display cart items in checkout
        checkoutItems.innerHTML = cart
          .map(
            (item) => `
            <div class="d-flex justify-content-between align-items-center mb-2">
                <span>${item.name}</span>
                <span>$${item.price.toFixed(2)}</span>
            </div>
        `
          )
          .join("");

        // Update total
        checkoutTotal.textContent =
          "$" + cart.reduce((sum, item) => sum + item.price, 0).toFixed(2);

        checkoutModal.show();
      }

      // Add form submission handler
      document
        .getElementById("checkoutForm")
        .addEventListener("submit", async (e) => {
          e.preventDefault();

          const formData = new FormData(e.target);
          const orderData = {
            customerInfo: {
              name: formData.get("fullName"),
              phone: formData.get("phone"),
              email: formData.get("email"),
              address: formData.get("address"),
              newsletter: formData.get("newsletter") === "on",
            },
            items: cart,
            total: cart.reduce((sum, item) => sum + item.price, 0),
          };

          // Mock API call
          await new Promise((resolve) => setTimeout(resolve, 1000));

          // Hide checkout modal
          bootstrap.Modal.getInstance(
            document.getElementById("checkoutModal")
          ).hide();

          // Show success modal
          const successModal = new bootstrap.Modal(
            document.getElementById("orderSuccessModal")
          );
          successModal.show();
        });

      function handleOrderComplete() {
        // Hide success modal
        bootstrap.Modal.getInstance(
          document.getElementById("orderSuccessModal")
        ).hide();

        // Clear cart
        cart = [];
        updateCart();

        // Close cart sidebar if open
        if (cartSidebar.classList.contains("active")) {
          toggleCart();
        }
      }

      // Initialize
      fetchCategories();
      fetchMenuItems();
    </script>
  </body>
</html>
